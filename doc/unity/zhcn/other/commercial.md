# 普洱精品支持（初稿）
普洱TS一直以来都通过开源共建的规则迭代维护。不过，为了帮助更多类型的开发者。普洱项目组准备提供更高级别的增值服务，增强开发者的接入信心，同时更能发挥普洱的潜力，帮助开发者更高效地完成项目：

> 征集意向项目组中, 定价皆为暂定

1. 高级计划

    提供等同于普洱面向腾讯公司内部工作室的服务，至少包括：
    * 无限制的普洱的基础问答咨询服务。
    * JS生态相关知识与应用方法的教学。
    * 项目立项建议。
    * 协助分析项目性能，排查项目性能问题。
    * 过往版本支持：
        1. PuerTS 1.3及以下版本。
        2. Unity 2018及以下版本。
    * 未来无开源打算的技术服务使用权。功能包括但不限于：
        1. v8 Snapshot 启动速度优化。
        2. 字节码支持。
        3. [指针压缩功能，减少内存消耗](#指针压缩功能)
        4. [基于pixui的用HTML编写UI功能](#pixui)。
    * 以更高优先级提供普洱开源计划中但未实现/未开源的功能。功能包括但不限于：
        1. [基于buffer读写的跨语言套件](#buffer读写套件webgl多线程组件)
        2. [WebGL下的多线程组件](#buffer读写套件webgl多线程组件)
        3. [fast-c-api call](#fast-c-api-call)
        4. ts代码分析生成link.xml / d.ts。
        5. Lua到TS的AI转写。
    > 这部分功能，普洱会保留未来用于开源的权利（但不一定会这么做）。你可以选择额外签署以游戏类型为维度的排他协议（从发布日起算最长半年、从签署日起算最长一年）排他协议生效期间内，不会将同样的功能提供给同样游戏类型的其他项目。
    * 微信小游戏上线全链路技术服务 —— 普洱团队和微信小游戏团队有深度合作，团队成员也包含前微信小游戏员工。您遇到的问题普洱项目组可协助进行内部沟通与优先解决。
    * 普洱生态相关开源技术的服务 —— 若您期望使用普洱爱好者业余时间提供的库/框架，但担心稳定性和维护性问题，普洱团队可以代为提供技术协助。这部分服务的收入最终会根据工作量给予原作者分成，鼓励生态的成长。目前支持的库和框架：
        1. [puerts-unity-kit](https://github.com/throw-out/puerts-unity-kit)
        2. [puerts-starter-kit](https://github.com/Geequlim/puerts-starter-kit)
        3. [puerts-cli](https://github.com/sbfkcel/puerts_cli)
        4. [nice-ts](https://github.com/Justin-sky/Nice-TS)

    *费用约为所耗人力成本的0.2倍。按月算。*
    
2. 特级计划

   提供包含在高级计划内的所有服务。同时接受贵项目内具体功能需求的开发（最好与普洱相关），可配合签署保密协议，并保证不会保存相关代码的副本。
   
   *费用约为所耗人力成本的两倍，按天算。*

------
## 功能备注

### pixui
PuerTS 提供了在 Unity/UE 下的 Typescript 编程能力，那么，HTML/CSS 技术是否也能在 Unity/UE 下应用呢？

答案是可以的。之前支持 PuerTS 开源运作的背后团队，就开发了这么一个框架，名为 PixUI。它支持完整的HTML/CSS渲染，甚至支持`<video>`、`<canvas>`等特别麻烦的标签。

PixUI 同时也支持和 PuerTS 联合运作，在使用全套 HTML 技术栈编写 UI 的同时，也能享受 PuerTS 的所有能力。

### Buffer读写套件/WebGL多线程组件
参见知乎文章 [【Unity WebGL】让JS比C#还快 —— Puer-WebGL 性能优化实录](https://zhuanlan.zhihu.com/p/646932579)

### fast-c-api call
v8自带功能，原本用于优化JS操作图形的接口。即对于大部份是基础数据类型的接口，跨语言速度有极大的优化（Windows下约4倍）。

其限制在于这个跨语言方式不支持回调JS，不支持创建新的JS对象，返回值也只支持数字和bool，且需要进行上千次调用后优化才会生效。

### 指针压缩功能
v8官方宣称可以节省40%内存。我们实测约33%左右。代价是启动时v8要预留一大块内存，ios要做特殊设置。
